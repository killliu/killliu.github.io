<!DOCTYPE html>
<html lang="en" data-mode="dark">
  <head prefix="og: http://ogp.me/ns#">
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Hugo 0.98.0">
<meta name="theme" content="Color Your World -- gitlab.com/rmaguiar/hugo-theme-color-your-world">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
























<title>raspberry (FAQ)</title>


<meta name="author" content="killliu">



<meta name="robots" content="index follow">




  
    <link rel="canonical" href="https://note.killliu.com/notes/faq/raspberry/">
  








<meta property="og:site_name" content="killliu&#39;s notes">
<meta property="og:title" content="raspberry (FAQ)">

  <meta property="og:url" content="https://note.killliu.com/notes/faq/raspberry/">




















<meta name="theme-color" content="#222">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">









  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "mainEntityOfPage": {
        "@type": "WebSite",
        "@id": "https:\/\/note.killliu.com\/"
      },
      "headline": "raspberry (FAQ)",
      "description": "",
      
      "url": "https:\/\/note.killliu.com\/notes\/faq\/raspberry\/",
      "inLanguage": "en",
      "datePublished": "2022-03-01",
      "dateModified": "2022-03-01",
      "wordCount" : "869",
      "publisher": {
        "@type": "Person",
        "name": "killliu"
      },
      "author": {
        "@type": "Person",
        "name": "killliu",
        "description": "Some indescribable horror.",
        
      }
    }
  </script>






<link rel="stylesheet" href="https://note.killliu.com/css/main.min.b7d51692a5d4e22c6115fa96a1d11f164a75f59e7fe9c1eac81c54ba706fcf8a.css" integrity="sha256-t9UWkqXU4ixhFfqWodEfFkp19Z5/6cHqyBxUunBvz4o=" crossorigin="anonymous">



<noscript>

  
  

  
    <meta name="theme-color" content="#CB8233" media="(prefers-color-scheme: dark)">
    <meta name="theme-color" content="#1f676b" media="(prefers-color-scheme: light)">
  

  
  <link rel="stylesheet" href="https://note.killliu.com/css/noscript.min.0f208a516c4efc455594eda62b46a723654120d87060a5341b00a817b6f061c8.css" integrity="sha256-DyCKUWxO/EVVlO2mK0anI2VBINhwYKU0GwCoF7bwYcg=" crossorigin="anonymous">

</noscript>



<link rel="preload" href="/fonts/open-sans-v17-latin-700.woff2" as="font" crossorigin="anonymous">
<link rel="preload" href="/fonts/open-sans-v17-latin-italic.woff2" as="font" crossorigin="anonymous">
<link rel="preload" href="/fonts/open-sans-v17-latin-regular.woff2" as="font" crossorigin="anonymous">
<link rel="preload" href="/fonts/oswald-v29-latin-700.woff2" as="font" crossorigin="anonymous">













  
  


<script src="https://note.killliu.com/js/main.d345cc65bf54eec5e407a3f088badeed1dcd325bddfd50d49bd1288081fbdd49.js" integrity="sha256-00XMZb9U7sXkB6PwiLre7R3NMlvd/VDUm9EogIH73Uk=" crossorigin="anonymous"></script>


    <style>      
      #BackToTop {
        font-family: Arial, Helvetica, sans-serif;
        font-size: 20px;
        display: none;
        position: fixed;
        bottom: 7rem;
        right: 2rem;
        z-index: 99;
        font-size: 18px;
        border: none;
        outline: none;
        background-color: #555;
        color: white;
        cursor: pointer;
        padding: 15px;
        border-radius: 4px;
        opacity: 0.3;
      }
      #BackToTop:hover {
        background-color: #EC5108;
      }
    </style>
  </head>

  <body>

    <header>
      

  <a href="/">killliu&#39;s notes</a>




  
    <nav aria-label="Main menu.">
      <ul>
        
          <li>
            <a class="btn" href="/notes/">Notes</a>
          </li>
        
          <li>
            <a class="btn" href="/resume/">Resume</a>
          </li>
        
      </ul>
    </nav>
  


    </header>

    <div class="filler">
      

  <main>
    <article>
      <header>
        
        <h1>raspberry (FAQ)</h1>

        
          <section class="terms">
            <ul><li><a class="btn" href="/tags/faq/">FAQ</a></li></ul>
          </section>
          <p>
            
              Published on <time datetime="2022-03-01">2022-03-01</time>
            
          </p>
        
        
        
        
      </header>
    
      
<details class="toc" open>
    <summary class="outline-dashed">
      Contents
    </summary>
    
    <nav id="TableOfContents">
  <ul>
    <li><a href="#raspberry-ubuntu">Raspberry Ubuntu</a></li>
    <li><a href="#wifi">wifi</a></li>
    <li><a href="#远程登录">远程登录</a></li>
    <li><a href="#networkmanager">NetworkManager</a></li>
    <li><a href="#开机启动时执行脚本启动npc">开机启动时执行脚本，启动npc</a></li>
    <li><a href="#reids--nginx">reids &amp; nginx</a></li>
    <li><a href="#防火墙">防火墙</a></li>
    <li><a href="#安装-mysql">安装 mysql</a></li>
    <li><a href="#golang">Golang</a></li>
    <li><a href="#安装">安装</a></li>
    <li><a href="#npc">npc</a></li>
    <li><a href="#jellyfin">jellyfin</a></li>
    <li><a href="#hexo">hexo</a></li>
    <li><a href="#403-forbidden">403 forbidden</a></li>
  </ul>
</nav>
  </details>

      










































  













  <h2 id="raspberry-ubuntu"><a class="anchor" href="#raspberry-ubuntu" title='Anchor for: Raspberry Ubuntu.'><svg aria-hidden="true"><use xlink:href="/img/github.min.715a9524b12e2401ace089bcca8cf268.svg#hashtag"/></svg></a> Raspberry Ubuntu</h2> 

<p>官网 <a href="https://www.raspberrypi.org/software/">Raspberry</a> 中下载树莓派的安装软件</p>
<p><a href="https://www.raspberrypi.com/software/operating-systems/">树莓派系统下载地址</a> <a href="https://ubuntu.com/download/raspberry-pi">ubuntu镜像地址</a></p>
<p>通过 Raspberry Pi Image 软件安装 ubuntu 系统</p>
<p><strong>高级设置中不要加任何配置</strong></p>









  <h2 id="wifi"><a class="anchor" href="#wifi" title='Anchor for: wifi.'><svg aria-hidden="true"><use xlink:href="/img/github.min.715a9524b12e2401ace089bcca8cf268.svg#hashtag"/></svg></a> wifi</h2> 

<p>烧录后，修改 boot 盘符中的 <strong>network-config</strong> 文件，以启用 wifi</p>
<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">wifis</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nt">wlan0</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">dhcp4</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">access-points</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="s2">&#34;your_essid&#34;</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">				</span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;your_password&#34;</span><span class="w">
</span></span></span></code></pre></div><p>默认账户密码都是：ubuntu</p>
<p>等界面上显示了 cliud-init 及 SSH HOST 字样时才可以登陆</p>
<p>登陆后会要求修改密码，<strong>注意看提示，修改新密码</strong></p>
<ul>
<li>
<p>修改主机名</p>
<blockquote>
<p>sudo vi /etc/hostname</p>
</blockquote>
</li>
<li>
<p>修改 root 密码</p>
<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo passwd root
</span></span><span class="line"><span class="cl"><span class="c1"># 根据提示输入新密码（两次）</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 切换到 root 用户</span>
</span></span><span class="line"><span class="cl">su
</span></span><span class="line"><span class="cl"><span class="c1"># 输入 root 密码以切换到 root 用户</span>
</span></span></code></pre></div></li>
<li>
<p>修改用户名 ubuntu -&gt; killliu</p>
<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># 修改 shadow</span>
</span></span><span class="line"><span class="cl">vi /ect/shadow
</span></span><span class="line"><span class="cl"><span class="c1"># &gt;&gt;&gt; ubuntu 修改为 killliu</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 修改开始目录</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /home
</span></span><span class="line"><span class="cl">mv ubuntu killliu
</span></span><span class="line"><span class="cl"><span class="c1"># 修改 passwd 文件</span>
</span></span><span class="line"><span class="cl">vi /ect/passwd
</span></span><span class="line"><span class="cl"><span class="c1"># &gt;&gt;&gt; ubuntu 修改为 killliu</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 重启</span>
</span></span><span class="line"><span class="cl">reboot
</span></span></code></pre></div></li>
<li>
<p>root 用户切换到普通用户</p>
<blockquote>
<p>su - killliu</p>
</blockquote>
</li>
</ul>









  <h2 id="远程登录"><a class="anchor" href="#远程登录" title='Anchor for: 远程登录.'><svg aria-hidden="true"><use xlink:href="/img/github.min.715a9524b12e2401ace089bcca8cf268.svg#hashtag"/></svg></a> 远程登录</h2> 

<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># 查看是否启动（如果能查到ssh进程，说明已经安装并启动了，不用再安装)</span>
</span></span><span class="line"><span class="cl">ps -e <span class="p">|</span>grep ssh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 安装 ssh</span>
</span></span><span class="line"><span class="cl">sudo apt-get install openssh-server
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 启动 ssh</span>
</span></span><span class="line"><span class="cl">sudo service ssh start
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 打开 ssh 配置文件</span>
</span></span><span class="line"><span class="cl">sudo vim /etc/ssh/sshd_config
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 在 PermitRootLogin Prohibit-password 下面添加一行（表示运行 root 用户远程登录）</span>
</span></span><span class="line"><span class="cl">PermitRootLogin yes
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 保存退出后，执行命令使修改生效</span>
</span></span><span class="line"><span class="cl">/etc/init.d/ssh restart
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 设置 root 用户密码</span>
</span></span><span class="line"><span class="cl">sudo passwd root
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># 启用 root 账号</span>
</span></span><span class="line"><span class="cl">sudo passwd --unlock root
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 远程使用 root 用户连接到树莓派</span>
</span></span><span class="line"><span class="cl">ssh root@ip
</span></span></code></pre></div>








  <h2 id="networkmanager"><a class="anchor" href="#networkmanager" title='Anchor for: NetworkManager.'><svg aria-hidden="true"><use xlink:href="/img/github.min.715a9524b12e2401ace089bcca8cf268.svg#hashtag"/></svg></a> NetworkManager</h2> 

<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># 安装 net-tools</span>
</span></span><span class="line"><span class="cl">sudo apt install net-tools
</span></span><span class="line"><span class="cl"><span class="c1"># 安装 wireless-tools</span>
</span></span><span class="line"><span class="cl">sudo apt install wireless-tools
</span></span><span class="line"><span class="cl"><span class="c1"># 安装 network-manager</span>
</span></span><span class="line"><span class="cl">sudo apt install network-manager
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 卸载 net-tools</span>
</span></span><span class="line"><span class="cl">sudo apt-get --purge remove net-tools
</span></span><span class="line"><span class="cl"><span class="c1"># 卸载 wireless-tools</span>
</span></span><span class="line"><span class="cl">sudo apt-get --purge remove wireless-tools
</span></span><span class="line"><span class="cl"><span class="c1"># 卸载 wireless-tools</span>
</span></span><span class="line"><span class="cl">sudo apt-get --purge remove network-manager
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 列举网卡设备</span>
</span></span><span class="line"><span class="cl">ifconfig
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 添加wifi网络信息</span>
</span></span><span class="line"><span class="cl"><span class="c1"># wifi 名中没有空格时，不要加双引号</span>
</span></span><span class="line"><span class="cl">sudo vi /etc/netplan/50-cloud-init.yaml
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">network:
</span></span><span class="line"><span class="cl">	ethernets:
</span></span><span class="line"><span class="cl">		eth0:
</span></span><span class="line"><span class="cl">			dhcp4: <span class="nb">true</span>
</span></span><span class="line"><span class="cl">			optional: <span class="nb">true</span>
</span></span><span class="line"><span class="cl">	wifis:
</span></span><span class="line"><span class="cl">		wlan0:
</span></span><span class="line"><span class="cl">		    optional: <span class="nb">true</span>
</span></span><span class="line"><span class="cl">		    access-points:
</span></span><span class="line"><span class="cl">			    <span class="s2">&#34;wifi 名称&#34;</span>:
</span></span><span class="line"><span class="cl">			        password: <span class="s2">&#34;密码&#34;</span>
</span></span><span class="line"><span class="cl">			dhcp4: <span class="nb">true</span>
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">		wlan1:
</span></span><span class="line"><span class="cl">		    optional: <span class="nb">true</span>
</span></span><span class="line"><span class="cl">		    access-points:
</span></span><span class="line"><span class="cl">			    OtherWifiName:
</span></span><span class="line"><span class="cl">			        password: <span class="s2">&#34;密码&#34;</span>
</span></span><span class="line"><span class="cl">			dhcp4: <span class="nb">true</span>
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl"><span class="c1"># 应用配置</span>
</span></span><span class="line"><span class="cl"><span class="c1"># sudo netplan generate</span>
</span></span><span class="line"><span class="cl"><span class="c1"># sudo netplan apply</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 重启</span>
</span></span><span class="line"><span class="cl">sudo reboot
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 连 wifi</span>
</span></span><span class="line"><span class="cl">nmtui
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 确认是否连上 wifi</span>
</span></span><span class="line"><span class="cl">iw wlan0 link
</span></span><span class="line"><span class="cl"><span class="c1"># 显示 可连接的 wifi 列表</span>
</span></span><span class="line"><span class="cl">iwlist wlan0 scan <span class="p">|</span> grep -i ESSID
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">############################### nmcli ###############################</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 查看网卡硬件及其状态</span>
</span></span><span class="line"><span class="cl">nmcli d status
</span></span><span class="line"><span class="cl">nmcli c <span class="c1">#或者 nmcli connection show</span>
</span></span><span class="line"><span class="cl">nmcli c show --active 
</span></span><span class="line"><span class="cl"><span class="c1"># 查看 wifi 是否开启</span>
</span></span><span class="line"><span class="cl">nmcli radio wifi
</span></span><span class="line"><span class="cl"><span class="c1"># 开启 wifi</span>
</span></span><span class="line"><span class="cl">nmcli radio wifi on
</span></span><span class="line"><span class="cl"><span class="c1"># 查看 wifi</span>
</span></span><span class="line"><span class="cl">nmcli device wifi list
</span></span><span class="line"><span class="cl"><span class="c1"># 连接 wifi</span>
</span></span><span class="line"><span class="cl">nmcli d wifi connect <span class="s2">&#34;KLWIFI&#34;</span> password <span class="s2">&#34;416352565&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 删除 wifi</span>
</span></span><span class="line"><span class="cl">nmcli c del uuid
</span></span><span class="line"><span class="cl"><span class="c1"># --- 连接公司的 wifi</span>
</span></span><span class="line"><span class="cl">nmcli con add <span class="nb">type</span> wifi ifname wlan0 con-name SKYUNION ssid SKYUNION
</span></span><span class="line"><span class="cl">nmcli con edit id SKYUNION
</span></span><span class="line"><span class="cl">&gt; <span class="nb">set</span> ipv4.method auto
</span></span><span class="line"><span class="cl">&gt; <span class="nb">set</span> wifi-sec.key-mgmt WPA-EAP
</span></span><span class="line"><span class="cl">&gt; <span class="nb">set</span> 802-1x.eap PEAP
</span></span><span class="line"><span class="cl">&gt; <span class="nb">set</span> 802-1x.identity shaliu
</span></span><span class="line"><span class="cl">&gt; <span class="nb">set</span> 802-1x.password <span class="m">416352565</span>
</span></span><span class="line"><span class="cl">&gt; <span class="nb">set</span> 802-1x.phase1-peaplabel <span class="m">0</span>
</span></span><span class="line"><span class="cl">&gt; <span class="nb">set</span> 802-1x.phase1-peapver <span class="m">0</span>
</span></span><span class="line"><span class="cl">&gt; <span class="nb">set</span> 802-1x.phase2-auth MSCHAPV2
</span></span><span class="line"><span class="cl">&gt; save
</span></span><span class="line"><span class="cl">&gt; activate
</span></span><span class="line"><span class="cl"><span class="c1"># 设置自动连接</span>
</span></span><span class="line"><span class="cl">nmcli connnection modify SKYUNION connection.autoconnect yes
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 配置</span>
</span></span><span class="line"><span class="cl">vi /etc/wpa_supplicant/wpa_supplicant.conf
</span></span><span class="line"><span class="cl">......
</span></span><span class="line"><span class="cl"><span class="nv">country</span><span class="o">=</span>CN
</span></span><span class="line"><span class="cl"><span class="nv">network</span><span class="o">={</span>
</span></span><span class="line"><span class="cl">	<span class="nv">ssid</span><span class="o">=</span><span class="s2">&#34;KLWIFI&#34;</span>				<span class="c1"># wifi 名称</span>
</span></span><span class="line"><span class="cl">	<span class="nv">key_mgmt</span><span class="o">=</span>WPA2-Personal		<span class="c1"># 加密方式</span>
</span></span><span class="line"><span class="cl">	<span class="nv">psk</span><span class="o">=</span><span class="s2">&#34;416352565&#34;</span>				<span class="c1"># 密码</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">......
</span></span><span class="line"><span class="cl"><span class="c1"># 配置公司wifi</span>
</span></span><span class="line"><span class="cl">......
</span></span><span class="line"><span class="cl"><span class="nv">network</span><span class="o">={</span>
</span></span><span class="line"><span class="cl">    <span class="nv">ssid</span><span class="o">=</span><span class="s2">&#34;SKYUNION&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">key_mgmt</span><span class="o">=</span>WPA-EAP
</span></span><span class="line"><span class="cl">    <span class="nv">eap</span><span class="o">=</span>PEAP
</span></span><span class="line"><span class="cl">    <span class="nv">identity</span><span class="o">=</span><span class="s2">&#34;shaliu&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">password</span><span class="o">=</span><span class="s2">&#34;416352565&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">phase1</span><span class="o">=</span><span class="s2">&#34;peaplabel=auto pepver=auto&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">phase2</span><span class="o">=</span><span class="s2">&#34;MSCHAPV2&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">......
</span></span><span class="line"><span class="cl"><span class="c1"># 查看wifi的ip地址</span>
</span></span><span class="line"><span class="cl">ip a 
</span></span><span class="line"><span class="cl"><span class="c1"># 10.26.43.2</span>
</span></span></code></pre></div>








  <h2 id="开机启动时执行脚本启动npc"><a class="anchor" href="#开机启动时执行脚本启动npc" title='Anchor for: 开机启动时执行脚本，启动npc.'><svg aria-hidden="true"><use xlink:href="/img/github.min.715a9524b12e2401ace089bcca8cf268.svg#hashtag"/></svg></a> 开机启动时执行脚本，启动npc</h2> 

<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">vi /etc/rc.d/rc.local
</span></span><span class="line"><span class="cl"><span class="c1"># 追加</span>
</span></span><span class="line"><span class="cl">sudo su - root -c <span class="s2">&#34;cd /data/ &amp;&amp; sh start_npc.sh start &amp;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 给权限</span>
</span></span><span class="line"><span class="cl">chmod +x /etc/rc.d/rc.local
</span></span></code></pre></div>








  <h2 id="reids--nginx"><a class="anchor" href="#reids--nginx" title='Anchor for: reids &amp; nginx.'><svg aria-hidden="true"><use xlink:href="/img/github.min.715a9524b12e2401ace089bcca8cf268.svg#hashtag"/></svg></a> reids &amp; nginx</h2> 

<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">yum install -y tar
</span></span><span class="line"><span class="cl">yum install -y wget
</span></span><span class="line"><span class="cl"><span class="c1"># for redis</span>
</span></span><span class="line"><span class="cl">yum -y install gcc automake autoconf libtool make
</span></span><span class="line"><span class="cl"><span class="c1"># 参考 env 目录中 nginx、redis 安装说明</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 删除无用包</span>
</span></span><span class="line"><span class="cl">yum clean all
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ----- nginx.conf -----</span>
</span></span><span class="line"><span class="cl">    server <span class="o">{</span>
</span></span><span class="line"><span class="cl">    	listen       <span class="m">80</span> default_server<span class="p">;</span>
</span></span><span class="line"><span class="cl">        server_name  localhost<span class="p">;</span> 
</span></span><span class="line"><span class="cl">        location / <span class="o">{</span>
</span></span><span class="line"><span class="cl">	   		proxy_pass http://127.0.0.1:4000<span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">     <span class="o">}</span>
</span></span></code></pre></div>








  <h2 id="防火墙"><a class="anchor" href="#防火墙" title='Anchor for: 防火墙.'><svg aria-hidden="true"><use xlink:href="/img/github.min.715a9524b12e2401ace089bcca8cf268.svg#hashtag"/></svg></a> 防火墙</h2> 

<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># 查看开放的端口列表</span>
</span></span><span class="line"><span class="cl">firewall-cmd --zone<span class="o">=</span>public --list-ports
</span></span><span class="line"><span class="cl"><span class="c1"># 开放 80、3306 端口</span>
</span></span><span class="line"><span class="cl">firewall-cmd --zone<span class="o">=</span>public --add-port<span class="o">=</span>80/tcp --permanent
</span></span><span class="line"><span class="cl">firewall-cmd --zone<span class="o">=</span>public --add-port<span class="o">=</span>3306/tcp --permanent
</span></span><span class="line"><span class="cl"><span class="c1"># 关闭端口 --- 4000 for hexo-admin</span>
</span></span><span class="line"><span class="cl">firewall-cmd --permanent --zone<span class="o">=</span>public --remove-port<span class="o">=</span>4000/tcp
</span></span><span class="line"><span class="cl"><span class="c1"># 重启防火墙</span>
</span></span><span class="line"><span class="cl">systemctl restart firewalld
</span></span><span class="line"><span class="cl"><span class="c1">### 已开放端口</span>
</span></span><span class="line"><span class="cl"><span class="m">22</span> 		
</span></span><span class="line"><span class="cl"><span class="m">80</span>
</span></span><span class="line"><span class="cl">81		<span class="c1"># nps 后台</span>
</span></span><span class="line"><span class="cl">9515	<span class="c1"># nps TCP 端口</span>
</span></span></code></pre></div>








  <h2 id="安装-mysql"><a class="anchor" href="#安装-mysql" title='Anchor for: 安装 mysql.'><svg aria-hidden="true"><use xlink:href="/img/github.min.715a9524b12e2401ace089bcca8cf268.svg#hashtag"/></svg></a> 安装 mysql</h2> 

<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">yum -y install mysql-server mysql mysql-devel
</span></span><span class="line"><span class="cl"><span class="c1"># 启动</span>
</span></span><span class="line"><span class="cl">systemctl start mysqld.service
</span></span><span class="line"><span class="cl"><span class="c1"># 查看状态</span>
</span></span><span class="line"><span class="cl">systemctl status mysqld.service
</span></span><span class="line"><span class="cl"><span class="c1"># 查看 root 初始密码 ------ 初始密码为空</span>
</span></span><span class="line"><span class="cl">grep <span class="s2">&#34;password&#34;</span> /var/log/mysql/mysqld.log
</span></span><span class="line"><span class="cl"><span class="c1"># 登录 mysql，并修改密码</span>
</span></span><span class="line"><span class="cl">mysql -u root
</span></span><span class="line"><span class="cl">use mysql<span class="p">;</span>
</span></span><span class="line"><span class="cl">alter user <span class="s1">&#39;root&#39;</span>@<span class="s1">&#39;localhost&#39;</span> identified with mysql_native_password by <span class="s1">&#39;iGG2020RD5()&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">update user <span class="nb">set</span> <span class="nv">Host</span><span class="o">=</span><span class="s1">&#39;%&#39;</span> where <span class="nv">User</span><span class="o">=</span><span class="s1">&#39;root&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">commit<span class="p">;</span>
</span></span><span class="line"><span class="cl">flush privileges<span class="p">;</span>
</span></span></code></pre></div>








  <h2 id="golang"><a class="anchor" href="#golang" title='Anchor for: Golang.'><svg aria-hidden="true"><use xlink:href="/img/github.min.715a9524b12e2401ace089bcca8cf268.svg#hashtag"/></svg></a> Golang</h2> 

<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">yum install -y epel-release
</span></span><span class="line"><span class="cl">yum install -y golang
</span></span></code></pre></div>








  <h2 id="安装"><a class="anchor" href="#安装" title='Anchor for: 安装.'><svg aria-hidden="true"><use xlink:href="/img/github.min.715a9524b12e2401ace089bcca8cf268.svg#hashtag"/></svg></a> 安装</h2> 

<blockquote>
<p>yum -y install rsync</p>
</blockquote>









  <h2 id="npc"><a class="anchor" href="#npc" title='Anchor for: npc.'><svg aria-hidden="true"><use xlink:href="/img/github.min.715a9524b12e2401ace089bcca8cf268.svg#hashtag"/></svg></a> npc</h2> 

<p><a href="https://github.com/ehang-io/nps/releases/download/v0.26.10/linux_arm64_client.tar.gz">linux_arm64_client.tar.gz</a></p>
<p>开机启动 npc</p>
<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">vi /etc/rc.local
</span></span><span class="line"><span class="cl"><span class="c1"># 追加代码</span>
</span></span><span class="line"><span class="cl">nohup /data/npc -server<span class="o">=</span>120.40.132.94:9515 -vkey<span class="o">=</span>xty8fenomquydbgr -type<span class="o">=</span>tcp <span class="p">&amp;</span>
</span></span></code></pre></div>








  <h2 id="jellyfin"><a class="anchor" href="#jellyfin" title='Anchor for: jellyfin.'><svg aria-hidden="true"><use xlink:href="/img/github.min.715a9524b12e2401ace089bcca8cf268.svg#hashtag"/></svg></a> jellyfin</h2> 

<p><a href="https://jellyfin.org/">官网</a></p>
<p><a href="https://repo.jellyfin.org/releases/server/linux/stable/">linux stable archives</a></p>
<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># 安装 ffmpeg --- 参考 ./linux.md </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">mkdir /opt/jellyfin
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /opt/jellyfin
</span></span><span class="line"><span class="cl"><span class="c1"># download</span>
</span></span><span class="line"><span class="cl">wget https://sgp1.mirror.jellyfin.org/releases/server/linux/versions/stable/server/10.7.6/jellyfin-server_10.7.6_linux-arm64.tar.gz
</span></span><span class="line"><span class="cl"><span class="c1"># unzip</span>
</span></span><span class="line"><span class="cl">tar xvzf jellyfin-server_10.7.6_linux-arm64.tar.gz
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 重命名文件夹</span>
</span></span><span class="line"><span class="cl">mv ./jellyfin-server_10.7.6 ./jellyfin
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># jellyfin.sh</span>
</span></span><span class="line"><span class="cl">vi jellyfin.sh
</span></span><span class="line"><span class="cl">......
</span></span><span class="line"><span class="cl"><span class="c1">#!/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="nv">JELLYFINDIR</span><span class="o">=</span><span class="s2">&#34;/opt/jellyfin&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">FFMPEGDIR</span><span class="o">=</span><span class="s2">&#34;/usr/share/jellyfin-ffmpeg&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$JELLYFINDIR</span>/jellyfin/jellyfin <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> -d <span class="nv">$JELLYFINDIR</span>/data <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> -C <span class="nv">$JELLYFINDIR</span>/cache <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> -c <span class="nv">$JELLYFINDIR</span>/config <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> -l <span class="nv">$JELLYFINDIR</span>/log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> --ffmpeg <span class="nv">$FFMPEGDIR</span>/ffmpeg
</span></span><span class="line"><span class="cl"> ......
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"> <span class="c1"># 设置权限</span>
</span></span><span class="line"><span class="cl">sudo chown -R user:group *
</span></span><span class="line"><span class="cl">sudo chmod u+x jellyfin.sh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># web client</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ./jellyfin
</span></span><span class="line"><span class="cl">mkdir jellyfin-web
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ./jellyfin-web
</span></span><span class="line"><span class="cl">wget https://sgp1.mirror.jellyfin.org/releases/server/linux/versions/stable/web/10.7.6/jellyfin-web_10.7.6_portable.tar.gz
</span></span><span class="line"><span class="cl"><span class="c1"># unzip</span>
</span></span><span class="line"><span class="cl">tar zvxf jellyfin-web_10.7.6_portable.tar.gz
</span></span><span class="line"><span class="cl"><span class="c1"># todo 解压出来的目录下的文件全部复制到 jellyfin-web 目录</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 开放 8096 端口</span>
</span></span><span class="line"><span class="cl">firewall-cmd --zone<span class="o">=</span>public --add-port<span class="o">=</span>8096/tcp --permanent
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 访问 10.26.43.2:8096</span>
</span></span></code></pre></div><p><strong><code>ERROR</code></strong> Couldn&rsquo;t find a valid ICU package installed on the system</p>
<blockquote>
<p>yum -y install libicu</p>
</blockquote>









  <h2 id="hexo"><a class="anchor" href="#hexo" title='Anchor for: hexo.'><svg aria-hidden="true"><use xlink:href="/img/github.min.715a9524b12e2401ace089bcca8cf268.svg#hashtag"/></svg></a> hexo</h2> 

<p><a href="https://hexo.io/zh-cn/">hexo 官网</a> &mdash; <a href="https://github.com/hexojs/hexo">github</a> &mdash; <a href="https://hexo.io/themes/">官网主题</a></p>
<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> ~
</span></span><span class="line"><span class="cl"><span class="c1"># 安装 hexo</span>
</span></span><span class="line"><span class="cl">npm install hexo-cli -g
</span></span><span class="line"><span class="cl"><span class="c1"># 拉取 hexo 服务代码</span>
</span></span><span class="line"><span class="cl">hexo init blog
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> blog
</span></span><span class="line"><span class="cl"><span class="c1"># 把 md 文档转化到静态html并保存在public目录下</span>
</span></span><span class="line"><span class="cl">hexo g
</span></span><span class="line"><span class="cl"><span class="c1"># ---- 配置 nginx --- </span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /etc/nginx
</span></span><span class="line"><span class="cl">user root<span class="p">;</span>
</span></span><span class="line"><span class="cl">    server <span class="o">{</span>
</span></span><span class="line"><span class="cl">    	listen       <span class="m">80</span> default_server<span class="p">;</span>
</span></span><span class="line"><span class="cl">        server_name  localhost<span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Load configuration files for the default server block.</span>
</span></span><span class="line"><span class="cl">        include /etc/nginx/default.d/*.conf<span class="p">;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">        location / <span class="o">{</span>
</span></span><span class="line"><span class="cl">           root /root/blog/public<span class="p">;</span>
</span></span><span class="line"><span class="cl">           index index.html index.htm<span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">     <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">systemctl restart nginx
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 修改默认端口</span>
</span></span><span class="line"><span class="cl">vi node_modules<span class="se">\h</span>exo-server<span class="se">\i</span>ndex.js
</span></span><span class="line"><span class="cl"><span class="c1"># 添加admin后台，根据提示设置密码、修改配置</span>
</span></span><span class="line"><span class="cl">npm install --save hexo-admin
</span></span><span class="line"><span class="cl"><span class="c1"># 修改主题</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 启动服务</span>
</span></span><span class="line"><span class="cl">hexo s
</span></span></code></pre></div><p><strong><code>error: line.mathALL is not funciton</code></strong></p>
<p>fixed: node 版本 12.0.0 以上</p>
<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 清除 nodejs 缓存</span>
</span></span><span class="line"><span class="cl">npm cache clean -f
</span></span><span class="line"><span class="cl"><span class="c1"># 安装nodejs管理工具</span>
</span></span><span class="line"><span class="cl">npm install -g n
</span></span><span class="line"><span class="cl"><span class="c1"># 切换已安装版本</span>
</span></span><span class="line"><span class="cl">n
</span></span><span class="line"><span class="cl"><span class="c1"># 安装官方稳定版本</span>
</span></span><span class="line"><span class="cl">n stable
</span></span></code></pre></div>








  <h2 id="403-forbidden"><a class="anchor" href="#403-forbidden" title='Anchor for: 403 forbidden.'><svg aria-hidden="true"><use xlink:href="/img/github.min.715a9524b12e2401ace089bcca8cf268.svg#hashtag"/></svg></a> 403 forbidden</h2> 

<div class="highlight"><pre aria-label="Box containing code sample." tabindex=0 class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">vi /etc/selinux/config
</span></span><span class="line"><span class="cl"><span class="nv">SELINUX</span><span class="o">=</span>disabled
</span></span><span class="line"><span class="cl">reboot
</span></span></code></pre></div>


    </article>
  </main>


    </div>
    
    <footer>
      


  

    

    
      
      
    
      
      
    
    
    <p>Copyright © 2022 killliu</p><p>粤ICP备14085800号-1</p>

  







    </footer>
    
    
    

    
    

    <button onclick="topFunction()" id="BackToTop" title="Go to top">Top</button>

    <script>
      var mybutton = document.getElementById("BackToTop");
      window.onscroll = function() {scrollFunction()};
      function scrollFunction() {
        if (document.body.scrollTop > 10 || document.documentElement.scrollTop > 10) {
          mybutton.style.display = "block";
        } else {
          mybutton.style.display = "none";
        }
      }
      function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
      }
    </script>

  </body>
</html>
