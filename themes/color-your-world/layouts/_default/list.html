{{ define "main" }}
  
  {{ $currentTitle := .Scratch.Get "currentTitle" }}
  
  <!-- Collect pages using the "search" layout -->
  {{ $searchPages := where .Site.RegularPages "Layout" "eq" "search" }}

  <main class="list">
    
    {{ if and .Site.Params.Search.enable (gt (len $searchPages) 0) (eq .Kind "section") }}
      {{ partialCached "search-form" . .Layout }}
    {{ end }}

    {{ partial "tag-list" . }}

    <h1>{{ $currentTitle }}</h1>
    {{ partial "post-list" . }}

  </main>
  
{{ end }}
